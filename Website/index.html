<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Martin Cortes || Computer Systems Engineer</title>
  <link rel="icon" type="image/png" href="../Website/images/newLogo.png">

  <!-- Preloader Styles (Critical CSS) -->
  <style>
    /* Preloader específico para móviles */
    .mobile-preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(135deg, #000000 0%, #000000 50%, #000000 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.8s ease-out;
    }

    .mobile-preloader.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .preloader-content {
      text-align: center;
      color: white;
    }

    .preloader-logo {
      font-size: clamp(24px, 6vw, 48px);
      font-weight: bold;
      margin-bottom: 20px;
      color: #9333ea;
      text-shadow: 
        -2px -2px 0 #000,
        2px -2px 0 #000,
        -2px 2px 0 #000,
        2px 2px 0 #000,
        0 0 10px rgba(147, 51, 234, 0.5);
      animation: pulse 2s infinite;
    }

    .preloader-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #00d4ff;
      animation: spin 1s ease-in-out infinite;
      margin: 20px auto;
    }

    .preloader-text {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      margin-top: 15px;
      animation: fadeInOut 2s infinite;
    }

    .progress-bar {
      width: 200px;
      height: 3px;
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid #000;
      border-radius: 4px;
      margin: 20px auto;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }

    .progress-fill {
      height: 100%;
      background: #9333ea;
      width: 0%;
      border-radius: 2px;
      transition: width 0.3s ease;
      box-shadow: 0 0 10px rgba(147, 51, 234, 0.7);
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
    }

    @keyframes fadeInOut {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    /* CRITICAL: Asegurar que el contenido sea visible después del preloader */
    body.loading {
      overflow: hidden;
    }

    body.loading .site-header,
    body.loading .section {
      opacity: 0 !important;
      visibility: hidden !important;
    }

    /* FIXED: Estado cargado con forzado de visibilidad SOLO para secciones */
    body.loaded .section {
      opacity: 1 !important;
      visibility: visible !important;
      display: block !important;
    }

    /* Header: solo asegurar visibilidad, NO tocar posicionamiento */
    body.loaded .site-header {
      opacity: 1 !important;
      visibility: visible !important;
      /* NO forzar display ni transform para mantener posicionamiento original */
    }

    /* CRITICAL: Forzar visibilidad en móviles después de cargar */
    @media (max-width: 968px) {
      body.loaded .section {
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
        transform: none !important;
        transition: none !important;
      }
      
      body.loaded .section-hero {
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
      }
      
      body.loaded .section-about,
      body.loaded .section-projects,
      body.loaded .section-jobs,
      body.loaded .section-contact {
        display: block !important;
      }

      /* CRITICAL: Evitar desbordamiento de animaciones en About Me */
      .section-about {
        overflow: hidden !important;
        position: relative !important;
      }

      .about-container {
        overflow: hidden !important;
        position: relative !important;
      }

      .tech-bubbles-zone {
        overflow: hidden !important;
        position: relative !important;
        max-height: 90vh !important;
      }

      /* Asegurar que las burbujas no se salgan del contenedor */
      .bubble {
        position: absolute !important;
        max-width: calc(100% - 20px) !important;
        max-height: calc(100% - 20px) !important;
      }

      /* Limitar animaciones que puedan desbordar */
      .about-image,
      .about-text,
      .skills-highlight {
        overflow: hidden !important;
        position: relative !important;
      }

      .mobile-preloader {
        background: linear-gradient(135deg, #000000 0%, #000000 80%, #000000 100%);
      }
      
      .preloader-logo {
        font-size: 32px;
        line-height: 1.2;
      }
      
      .progress-bar {
        width: 80vw;
        max-width: 250px;
      }
    }

    /* Prevenir cualquier overlay que pueda ocultar contenido */
    .section::before,
    .section::after {
      display: none !important;
    }
  </style>

  <!-- CSS Files -->
  <link rel="stylesheet" href="./styles/defaultStyles.css">
  <link rel="stylesheet" href="./styles/initialAnimation.css">
  <link rel="stylesheet" href="./styles/introSection.css">
  <link rel="stylesheet" href="./styles/jobsSection.css">
  <link rel="stylesheet" href="./styles/projectSection.css">
  <link rel="stylesheet" href="./styles/contactSection.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Preload GSAP Scripts -->
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" as="script">
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" as="script">
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js" as="script">
</head>

<body class="loading">

  <!-- Preloader para móviles -->
  <div class="mobile-preloader" id="mobilePreloader">
    <div class="preloader-content">
      <div class="preloader-logo">MARTIN CORTES</div>
      <div class="preloader-spinner"></div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="preloader-text" id="preloaderText">Loading...</div>
    </div>
  </div>

  <!-- Header actualizado con navegación rápida -->
  <header class="site-header" id="main-header">
    <div class="header-left">
      <div class="header-logo">MARTIN CORTES / Debugging Life</div>
      
      <!-- Botones de navegación rápida -->
      <div class="header-nav-buttons">
        <a href="#about-me" class="nav-button">About Me</a>
        <a href="#projects" class="nav-button">Projects</a>
        <a href="#jobs" class="nav-button">Jobs</a>
        <a href="#contact-me" class="nav-button">Contact</a>
      </div>
    </div>
    
    <!-- Botón hamburguesa para navegación en móviles -->
    <button class="mobile-nav-toggle" id="mobile-nav-toggle">
      <i class="fas fa-bars"></i>
    </button>
    
    <!-- Menú móvil -->
    <div class="mobile-nav-menu" id="mobile-nav-menu">
      <div class="mobile-nav-buttons">
        <a href="#about-me" class="nav-button">About Me</a>
        <a href="#projects" class="nav-button">Projects</a>
        <a href="#jobs" class="nav-button">Jobs</a>
        <a href="#contact-me" class="nav-button">Contact</a>
      </div>
      
      <!-- Iconos sociales en móvil -->
      <div class="header-nav">
        <ul>
          <li><a href="https://www.facebook.com/martin.cortes.754" target="_blank" title="Facebook"><i class="fab fa-facebook-f"></i></a></li>
          <li><a href="https://www.instagram.com/martin_cortia/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a></li>
          <li><a href="https://www.linkedin.com/in/martin-francisco-cortes-8bb642272/" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a></li>
          <li><a href="https://github.com/MartinCortes20" target="_blank" title="GitHub"><i class="fab fa-github"></i></a></li>
          <li><a href="https://www.cloudskillsboost.google/public_profiles/efcb3188-68aa-40da-944b-2ed6bac305bc" target="_blank" title="Google Cloud"><i class="fab fa-google"></i></a></li>
          <li><a href="mailto:cortesbuendiamartin@gmail.com" title="Email"><i class="fas fa-envelope"></i></a></li>
        </ul>
      </div>
    </div>
    
    <!-- Iconos sociales para desktop -->
    <nav class="header-nav" id="header-nav">
      <ul>
        <li><a href="https://www.facebook.com/martin.cortes.754" target="_blank" title="Facebook"><i class="fab fa-facebook-f"></i></a></li>
        <li><a href="https://www.instagram.com/martin_cortia/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a></li>
        <li><a href="https://www.linkedin.com/in/martin-francisco-cortes-8bb642272/" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a></li>
        <li><a href="https://github.com/MartinCortes20" target="_blank" title="GitHub"><i class="fab fa-github"></i></a></li>
        <li><a href="https://www.cloudskillsboost.google/public_profiles/efcb3188-68aa-40da-944b-2ed6bac305bc" target="_blank" title="Google Cloud"><i class="fab fa-google"></i></a></li>
        <li><a href="mailto:cortesbuendiamartin@gmail.com" title="Email"><i class="fas fa-envelope"></i></a></li>
      </ul>
    </nav>
  </header>

  <!-- Primera sección (animación existente) -->
  <section id="inicio" class="section section-hero">
    <div class="pov">
      <div class="tray">
        <div class="die">
          <div class="cube">
            <div class="face" style="font-size:50px">MARTIN</div>
            <div class="face" style="font-size:58px">CORTES</div>
            <div class="face" style="font-size:50px">MARTIN</div>
            <div class="face" style="font-size:58px">CORTES</div>    
          </div>
        </div>  
      </div>
    </div>
    <p class="scroll-hint">scroll to explorer</p>
  </section>

<!-- Segunda sección (About Me) -->
<section id="about-me" class="section section-about">
  <div class="about-container">
    <!-- COLUMNA 1: TEXTO -->
    <div class="about-text">
      <h2>HI THERE!</h2>
      <p class="subtitle">Computer Systems Engineering Student</p>

      <p>
        I'm a <span class="text-shuffle">passionate</span> developer focused on building innovative tech solutions. Currently in my 7th semester at ESCOM-IPN (Mexico), I have hands-on experience in both backend and frontend development.
      </p>

      <p>
        I specialize in Node.js, JavaScript, and Swift, with solid knowledge of authentication, RESTful APIs, and database design. I'm also experienced in mobile development using Flutter, and modern web technologies like React.js.
      </p>

      <p>
        My strengths include teamwork, leadership, and creative problem-solving — demonstrated through academic projects and standout participation in events like ExpoESCOM.
      </p>

      <div class="skills-highlight">
        <span class="skill-tag">Node.js</span>
        <span class="skill-tag">React.js</span>
        <span class="skill-tag">Swift</span>
        <span class="skill-tag">Flutter</span>
        <span class="skill-tag">JavaScript</span>
        <span class="skill-tag">Python</span>
        <span class="skill-tag">UX/UI</span>
      </div>
    </div>
    
    <!-- COLUMNA 2: IMÁGENES (TODAS VISIBLES) -->
    <div class="about-image">
      <!-- Las 3 imágenes se generarán dinámicamente aquí y serán visibles simultáneamente -->
    </div>

    <!-- COLUMNA 3: BURBUJAS TECNOLÓGICAS (MÁS COMPACTAS) -->
    <div class="tech-bubbles-zone" id="techBubblesZone">
      <div class="zone-title">TECH STACK</div>
      <!-- Las burbujas se generarán aquí dinámicamente en grid 3x4 -->
    </div>
  </div>
</section>

    <!-- Tercera sección (Proyectos) -->
 <section id="projects" class="section section-projects">
    <div class="container">
      <h2>MY PROJECTS</h2>
      <p class="section-subtitle">A showcase of my technical skills and problem-solving abilities</p>
      
      <div class="projects-container">
        
        <!-- Proyecto 1: Star Cluster R136 -->
        <div class="project-card">
          <div class="project-image">
            <img src="./Projects/stars.gif" alt="Star Cluster R136" />
          </div>
          <div class="project-content">
            <div class="project-title">Star Cluster R136</div>
            <div class="project-tech">
              <span class="tech-tag">Java</span>
              <span class="tech-tag">Algorithms</span>
              <span class="tech-tag">Data Structures</span>
            </div>
            <div class="project-description">
              Algorithm to find the minimum distance between stars in the R136 star cluster. Implementation of efficient geometric algorithms to solve closest pair problems in a Cartesian plane with optimal time complexity.
            </div>
            <div class="project-links">
              <a href="https://github.com/MartinCortes20/StarClusterR136" target="_blank" class="project-link primary">
                <i class="fab fa-github"></i>
                View Code
              </a>
            </div>
          </div>
        </div>

        <!-- Proyecto 2: Store Inventory System -->
        <div class="project-card">
          <div class="project-image">
            <img src="./Projects/SuperMArket.gif" alt="Store Inventory System" />
          </div>
          <div class="project-content">
            <div class="project-title">Department Store Inventory</div>
            <div class="project-tech">
              <span class="tech-tag">Java</span>
              <span class="tech-tag">Hash Tables</span>
              <span class="tech-tag">GUI</span>
              <span class="tech-tag">File I/O</span>
            </div>
            <div class="project-description">
              Inventory management system for 75 store items using hash techniques for efficient data access. Features collision resolution, file loading, and a user-friendly interface for product queries and management.
            </div>
            <div class="project-links">
              <a href="https://github.com/MartinCortes20/ExamenTercerParcialAlgoritmosMartinGUI" target="_blank" class="project-link primary">
                <i class="fab fa-github"></i>
                View Code
              </a>
            </div>
          </div>
        </div>

        <!-- Proyecto 3: File Sorting Algorithm -->
        <div class="project-card">
          <div class="project-image">
            <img src="./Projects/a lot of files.gif" alt="File Sorting" />
          </div>
          <div class="project-content">
            <div class="project-title">Advanced File Sorting System</div>
            <div class="project-tech">
              <span class="tech-tag">Java</span>
              <span class="tech-tag">Sorting Algorithms</span>
              <span class="tech-tag">Performance Analysis</span>
            </div>
            <div class="project-description">
              Implementation and comparison of multiple sorting algorithms to determine the most efficient approach for large file datasets. Includes performance metrics and algorithm complexity analysis.
            </div>
            <div class="project-links">
              <a href="https://github.com/MartinCortes20/2doExamenMartinCortesGUI" target="_blank" class="project-link primary">
                <i class="fab fa-github"></i>
                View Code
              </a>
            </div>
          </div>
        </div>

        <!-- Proyecto 4: Olympics Podium System -->
        <div class="project-card">
          <div class="project-image">
            <img src="./Projects/match.gif" alt="Olympics Podium" />
          </div>
          <div class="project-content">
            <div class="project-title">Olympics Podium Management</div>
            <div class="project-tech">
              <span class="tech-tag">Java</span>
              <span class="tech-tag">Binary Search Trees</span>
              <span class="tech-tag">Data Management</span>
            </div>
            <div class="project-description">
              Olympic medal tracking system using three binary search trees (Gold, Silver, Bronze) to store athlete information. Features point calculation system and alphabetical sorting by athlete name.
            </div>
            <div class="project-links">
              <a href="https://github.com/MartinCortes20/ExamenAlgoritmosCortesBuendia2022" target="_blank" class="project-link primary">
                <i class="fab fa-github"></i>
                View Code
              </a>
            </div>
          </div>
        </div>

        <!-- Proyecto 5: Personal Portfolio Website -->
        <div class="project-card">
          <div class="project-image">
            <img src="./Projects//website.gif" alt="Portfolio Website" />
          </div>
          <div class="project-content">
            <div class="project-title">Interactive Portfolio Website</div>
            <div class="project-tech">
              <span class="tech-tag">HTML5</span>
              <span class="tech-tag">CSS3</span>
              <span class="tech-tag">JavaScript</span>
              <span class="tech-tag">GSAP</span>
            </div>
            <div class="project-description">
              Modern, responsive portfolio website featuring advanced animations, interactive elements, and optimized performance. Built with vanilla JavaScript and GSAP for smooth user experience.
            </div>
            <div class="project-links">
              <a href="https://martincortes20.github.io/MartinCortessWebsite.github.io/Website/index.html" class="project-link primary">
                <i class="fas fa-external-link-alt"></i>
                Live Demo
              </a>
              <a href="https://github.com/MartinCortes20/MartinCortessWebsite.github.io" target="_blank" class="project-link">
                <i class="fab fa-github"></i>
                Code
              </a>
            </div>
          </div>
        </div>

        <!-- Proyecto 6: Mobile App Project -->
        <div class="project-card">
          <div class="project-image">
            <img src="./Projects/nutricom.gif" alt="Flutter Mobile App" />
          </div>
          <div class="project-content">
            <div class="project-title">Cross-Platform Mobile App</div>
            <div class="project-tech">
              <span class="tech-tag">Flutter</span>
              <span class="tech-tag">Dart</span>
              <span class="tech-tag">Firebase</span>
              <span class="tech-tag">REST API</span>
            </div>
            <div class="project-description">
              Cross-platform mobile application built with Flutter, featuring real-time data synchronization, user authentication, and intuitive UI/UX design. Integrated with Firebase backend services.
            </div>
            <div class="project-links">
              <a href="https://github.com/leonardo21319/SoftwareMovilFlutter" class="project-link primary">
                <i class="fab fa-github"></i>
                View Code
              </a>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

    <!-- Cuarta sección (Jobs) -->
 <section id="jobs" class="section section-jobs">
  <div class="container">
    <h2>MY PROFESSIONAL EXPERIENCE</h2>
    <div class="jobs-container">
      <!-- Trabajo 1 - Actual -->
      <div class="job-card">
        <div class="job-image">
          <img src="./Projects/sapsy.png" alt="Backend Developer" />
        </div>
        <div class="job-content">
          <div class="job-title">Backend Developer</div>
          <div class="job-company">S.A.P.S.Y (Sistema de Agua Potable y Saneamiento de Yautepec)</div>
          <div class="job-period">June 2024 - November 2024</div>
          <div class="job-description">
            Developed software for water consumption management. Implemented backend services using Node.js and Express. Ensured user security through password hashing (bcrypt) and JWT-based authentication. Connected and optimized databases.
          </div>
        </div>
      </div>
      
      <!-- Trabajo 2 -->
      <div class="job-card">
        <div class="job-image">
          <img src="./Projects//by3solution.jpg" alt="Point of Sale Developer" />
        </div>
        <div class="job-content">
          <div class="job-title">Point of Sale Developer</div>
          <div class="job-company">By 3 Solutions</div>
          <div class="job-period">February 2023 - June 2023</div>
          <div class="job-description">
            Developed point-of-sale systems using JavaScript and Node.js. Integrated backend services and APIs. Worked on full-stack development with a focus on user experience and efficiency.
          </div>
        </div>
      </div>
      
      <!-- Trabajo 3 -->
      <div class="job-card">
        <div class="job-image">
          <img src="./Projects/totalplay.webp" alt="Application Development Intern" />
        </div>
        <div class="job-content">
          <div class="job-title">Application Development Intern</div>
          <div class="job-company">Totalplay</div>
          <div class="job-period">September 2022 - February 2023</div>
          <div class="job-description">
            Developed applications using Swift and Objective-C. Collaborated with senior developers on new features. Participated in debugging and troubleshooting code issues.
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Quinta sección (Contact Me) -->
<section id="contact-me" class="section section-contact">
  <div class="particles"></div>
  <div class="contact-container">
    <h2>CONTACT ME</h2>
    <p>Interested in collaborating? Feel free to reach out through any of these channels.</p>
    
    <div class="contact-icons">
      <!-- Email -->
      <div class="contact-icon" data-platform="email">
        <div class="contact-icon-inner">
          <a href="mailto:cortesbuendiamartin@gmail.com">
            <i class="fas fa-envelope"></i>
          </a>
        </div>
        <div class="contact-name">Email</div>
      </div>
      
      <!-- GitHub -->
      <div class="contact-icon" data-platform="github">
        <div class="contact-icon-inner">
          <a href="https://github.com/MartinCortes20" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        </div>
        <div class="contact-name">GitHub</div>
      </div>
      
      <!-- LinkedIn -->
      <div class="contact-icon" data-platform="linkedin">
        <div class="contact-icon-inner">
          <a href="https://www.linkedin.com/in/martin-francisco-cortes-8bb642272/" target="_blank">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </div>
        <div class="contact-name">LinkedIn</div>
      </div>
      
      <!-- Instagram -->
      <div class="contact-icon" data-platform="instagram">
        <div class="contact-icon-inner">
          <a href="https://www.instagram.com/martin_cortia/" target="_blank">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
        <div class="contact-name">Instagram</div>
      </div>
      
      <!-- WhatsApp -->
      <div class="contact-icon" data-platform="whatsapp">
        <div class="contact-icon-inner">
          <a href="https://wa.me/5518323146" target="_blank">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
        <div class="contact-name">WhatsApp</div>
      </div>
    </div>
  </div>
</section>

  <!-- GSAP Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

  <!-- Preloader Script -->
  <script>
    // FIXED: Sistema de Preloader con gestión mejorada de visibilidad
    class MobilePreloader {
      constructor() {
        this.isMobile = window.innerWidth <= 968;
        this.loadedAssets = 0;
        this.totalAssets = 0;
        this.progressFill = document.getElementById('progressFill');
        this.preloaderText = document.getElementById('preloaderText');
        this.preloader = document.getElementById('mobilePreloader');
        this.contentReady = false;
        
        this.loadingMessages = [
          'Loading experience…',
          'Preparing portfolio…',
          'Almost ready!'
        ];
        
        this.init();
      }

      init() {
        // Detectar cuando el DOM está listo
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => this.startLoading());
        } else {
          this.startLoading();
        }
      }

      startLoading() {
        // Contar assets para cargar
        this.countAssets();
        
        // Iniciar progreso simulado
        this.simulateProgress();
        
        // Esperar a que todo esté cargado
        Promise.all([
          this.waitForImages(),
          this.waitForFonts(),
          this.waitForScripts(),
          this.minLoadingTime(2000) // Mínimo 2 segundos para móviles
        ]).then(() => {
          this.finishLoading();
        }).catch((error) => {
          console.warn('Error en preloader:', error);
          // Fallback: cargar después de timeout
          setTimeout(() => this.finishLoading(), 3000);
        });
      }

      countAssets() {
        const images = document.querySelectorAll('img');
        const scripts = document.querySelectorAll('script[src]');
        const stylesheets = document.querySelectorAll('link[rel="stylesheet"]');
        
        this.totalAssets = images.length + scripts.length + stylesheets.length;
      }

      simulateProgress() {
        let progress = 0;
        let messageIndex = 0;
        
        const progressInterval = setInterval(() => {
          progress += Math.random() * 15;
          
          if (progress > 90) {
            progress = 90;
            clearInterval(progressInterval);
          }
          
          this.updateProgress(progress);
          
          // Cambiar mensaje ocasionalmente
          if (Math.random() > 0.7 && messageIndex < this.loadingMessages.length - 1) {
            messageIndex++;
            this.preloaderText.textContent = this.loadingMessages[messageIndex];
          }
        }, 200);
      }

      waitForImages() {
        return new Promise((resolve) => {
          const images = document.querySelectorAll('img');
          let loadedImages = 0;
          
          if (images.length === 0) {
            resolve();
            return;
          }
          
          images.forEach((img) => {
            if (img.complete) {
              loadedImages++;
            } else {
              img.addEventListener('load', () => {
                loadedImages++;
                if (loadedImages === images.length) resolve();
              });
              
              img.addEventListener('error', () => {
                loadedImages++;
                if (loadedImages === images.length) resolve();
              });
            }
          });
          
          if (loadedImages === images.length) resolve();
        });
      }

      waitForFonts() {
        return new Promise((resolve) => {
          if (!document.fonts) {
            resolve();
            return;
          }
          
          document.fonts.ready.then(() => {
            resolve();
          }).catch(() => {
            resolve(); // Continuar aunque falle
          });
        });
      }

      waitForScripts() {
        return new Promise((resolve) => {
          // Esperar a que GSAP esté disponible
          const checkGSAP = () => {
            if (typeof gsap !== 'undefined') {
              resolve();
            } else {
              setTimeout(checkGSAP, 100);
            }
          };
          
          checkGSAP();
        });
      }

      minLoadingTime(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }

      updateProgress(percentage) {
        percentage = Math.min(percentage, 100);
        this.progressFill.style.width = percentage + '%';
      }

      finishLoading() {
        // Completar progreso
        this.updateProgress(100);
        this.preloaderText.textContent = 'Ready to explore!';
        this.contentReady = true;
        
        setTimeout(() => {
          // CRITICAL: Preparar contenido ANTES de quitar el preloader
          this.prepareContentVisibility();
          
          // Fade out del preloader
          this.preloader.classList.add('fade-out');
          
          // Mostrar contenido con forzado de visibilidad
          document.body.classList.remove('loading');
          document.body.classList.add('loaded');
          
          // CRITICAL: Forzar visibilidad inmediata
          this.forceContentVisibility();
          
          // Eliminar preloader después de la transición
          setTimeout(() => {
            this.preloader.remove();
            
            // Verificación final de visibilidad
            this.finalVisibilityCheck();
            
            // Disparar evento de contenido listo
            window.dispatchEvent(new CustomEvent('preloaderComplete', {
              detail: { contentReady: true }
            }));
          }, 800);
        }, 500);
      }

      // NUEVA: Preparar visibilidad del contenido (MENOS AGRESIVA)
      prepareContentVisibility() {
        const sections = document.querySelectorAll('.section');
        const header = document.querySelector('.site-header');
        
        // Preparar visibilidad SIN interferir con posicionamiento original
        sections.forEach(section => {
          section.style.opacity = '1';
          section.style.visibility = 'visible';
          
          if (section.classList.contains('section-hero')) {
            section.style.display = 'flex';
          } else {
            section.style.display = 'block';
          }
          
          // NO tocar transform, position, z-index
        });

        // Preparar header SIN cambiar NADA de su posicionamiento o estilos
        if (header) {
          header.style.opacity = '1';
          header.style.visibility = 'visible';
          // NO tocar display, position, z-index, transform - mantener estilos originales del CSS
        }
      }

      // NUEVA: Forzar visibilidad del contenido (MENOS AGRESIVA)
      forceContentVisibility() {
        // Solo ajustar propiedades críticas de visibilidad
        const allElements = document.querySelectorAll('.section, .site-header');
        
        allElements.forEach(element => {
          // Solo forzar visibilidad básica
          element.style.opacity = '1';
          element.style.visibility = 'visible';
          
          // Solo para secciones, ajustar display
          if (element.classList.contains('section-hero')) {
            element.style.display = 'flex';
          } else if (element.classList.contains('section')) {
            element.style.display = 'block';
          }
          
          // Para el header: NO tocar display ni nada más, solo visibilidad
          // Dejar que mantenga su CSS original
          
          // Solo limpiar GSAP si es realmente necesario y NO es el header
          if (typeof gsap !== 'undefined' && !element.classList.contains('site-header')) {
            gsap.set(element, { opacity: 1, visibility: 'visible' });
          }
        });

        // Scroll a la primera sección
        setTimeout(() => {
          window.scrollTo({
            top: 0,
            left: 0,
            behavior: 'auto'
          });
        }, 100);
      }

      // NUEVA: Verificación final de visibilidad (MENOS AGRESIVA)
      finalVisibilityCheck() {
        // Verificación menos frecuente para no interferir
        let checks = 0;
        const maxChecks = 3; // Reducido de 6 a 3
        
        const visibilityInterval = setInterval(() => {
          checks++;
          
          const sections = document.querySelectorAll('.section');
          let hiddenSections = 0;
          
          sections.forEach(section => {
            const computed = window.getComputedStyle(section);
            
            // Solo corregir si está COMPLETAMENTE invisible
            if (computed.opacity === '0' && computed.visibility === 'hidden') {
              hiddenSections++;
              
              // Corrección mínima
              section.style.opacity = '1';
              section.style.visibility = 'visible';
              
              if (section.classList.contains('section-hero')) {
                section.style.display = 'flex';
              } else {
                section.style.display = 'block';
              }
              
              console.warn('Sección completamente oculta detectada y corregida:', section.className);
            }
          });
          
          // Parar más pronto para no interferir
          if (hiddenSections === 0 || checks >= maxChecks) {
            clearInterval(visibilityInterval);
            console.log('Verificación de visibilidad completada (modo no-interferencia)');
          }
        }, 1000); // Cada 1 segundo en lugar de 500ms
      }
    }

    // Inicializar preloader
    new MobilePreloader();

    // CRITICAL: Gestión de eventos para prevenir ocultación del contenido
    let scriptsLoaded = false;
    let preloaderCompleted = false;

    // Escuchar cuando el preloader termine
    window.addEventListener('preloaderComplete', function(event) {
      preloaderCompleted = true;
      console.log('Preloader completado, contenido debe ser visible');
      
      // Verificación inmediata de visibilidad
      ensureAllContentVisible();
      
      // Prevenir que scripts posteriores oculten el contenido
      preventContentHiding();
      
      // Configurar GSAP de manera segura
      if (typeof gsap !== 'undefined') {
        configureGSAPSafely();
      }
      
      // Cargar scripts adicionales de manera controlada
      loadAdditionalScripts();
    });

    // NUEVA: Función para asegurar que todo el contenido sea visible (MEJORADA)
    function ensureAllContentVisible() {
      const sections = document.querySelectorAll('.section');
      const header = document.querySelector('.site-header');
      
      // Forzar visibilidad de todas las secciones SIN interferir con posicionamiento
      sections.forEach((section, index) => {
        // Solo forzar opacidad y visibilidad, NO position ni z-index
        section.style.opacity = '1';
        section.style.visibility = 'visible';
        
        if (section.classList.contains('section-hero')) {
          section.style.display = 'flex';
        } else {
          section.style.display = 'block';
        }
      });

      // Para el header: SOLO visibilidad, mantener todo lo demás intacto
      if (header) {
        header.style.opacity = '1';
        header.style.visibility = 'visible';
        // NO tocar display, position, z-index, transform - respetar CSS original
      }
      
      console.log('Visibilidad de contenido forzada (sin interferir con posicionamiento)');
    }

    // NUEVA: Prevenir que el contenido se oculte después del preloader (MENOS AGRESIVA)
    function preventContentHiding() {
      // Interceptar solo intentos SEVEROS de ocultar secciones
      const observer = new MutationObserver((mutations) => {
        if (!preloaderCompleted) return;
        
        mutations.forEach((mutation) => {
          if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
            const target = mutation.target;
            
            // Solo intervenir en secciones principales, NO en el header para este caso
            if (target.classList.contains('section')) {
              const computed = window.getComputedStyle(target);
              
              // Solo corregir si está completamente invisible (opacity 0 Y visibility hidden)
              if (computed.opacity === '0' && computed.visibility === 'hidden') {
                console.warn('Sección completamente oculta detectada, corrigiendo:', target.className);
                
                // Corrección mínima - solo visibilidad, no posicionamiento
                target.style.opacity = '1';
                target.style.visibility = 'visible';
                
                if (target.classList.contains('section-hero')) {
                  target.style.display = 'flex';
                } else {
                  target.style.display = 'block';
                }
              }
            }
            
            // Para el header: solo verificar visibilidad básica si es crítico
            if (target.classList.contains('site-header')) {
              const computed = window.getComputedStyle(target);
              if (computed.opacity === '0' && computed.visibility === 'hidden') {
                console.warn('Header completamente oculto, corrigiendo visibilidad');
                target.style.opacity = '1';
                target.style.visibility = 'visible';
                // NO tocar nada más del header
              }
            }
          }
        });
      });

      // Observar cambios pero con menos agresividad
      observer.observe(document.body, {
        attributes: true,
        attributeFilter: ['style'],
        subtree: false // Solo elementos directos del body
      });
      
      // Parar observación después de 5 segundos (menos tiempo)
      setTimeout(() => observer.disconnect(), 5000);
    }

    // NUEVA: Configurar GSAP de manera segura SIN interferir con funcionalidades
    function configureGSAPSafely() {
      if (typeof gsap === 'undefined') return;
      
      gsap.config({
        force3D: window.innerWidth > 968,
        nullTargetWarn: false
      });
      
      // NO interceptar GSAP - dejar que funcione normalmente
      console.log('GSAP configurado sin interferencias');
    }

    // NUEVA: Cargar scripts adicionales de manera controlada
    function loadAdditionalScripts() {
      if (scriptsLoaded) return;
      scriptsLoaded = true;
      
      // Esperar un poco antes de permitir que otros scripts se ejecuten
      setTimeout(() => {
        // Aquí se ejecutarán los scripts adicionales de manera segura
        console.log('Scripts adicionales pueden ejecutarse ahora');
        
        // Asegurar visibilidad después de que todos los scripts se carguen
        setTimeout(ensureAllContentVisible, 1000);
      }, 500);
    }

    // Script de emergencia para casos extremos (MEJORADO)
    window.addEventListener('load', function() {
      setTimeout(function() {
        const body = document.body;
        const preloader = document.getElementById('mobilePreloader');
        
        if (body.classList.contains('loading')) {
          console.log('Activando fallback de emergencia');
          body.classList.remove('loading');
          body.classList.add('loaded');
          
          if (preloader) {
            preloader.style.display = 'none';
          }
          
          // Forzar visibilidad como emergencia
          ensureAllContentVisible();
        }
      }, 5000); // Fallback después de 5 segundos máximo
    });

    // NUEVA: Verificación periódica de visibilidad (MENOS AGRESIVA)
    function startVisibilityWatch() {
      if (!preloaderCompleted) return;
      
      const watchInterval = setInterval(() => {
        const sections = document.querySelectorAll('.section');
        let hiddenCount = 0;
        
        sections.forEach(section => {
          const computed = window.getComputedStyle(section);
          // Solo contar como oculta si opacity es 0 Y visibility es hidden
          if (computed.opacity === '0' && computed.visibility === 'hidden') {
            hiddenCount++;
          }
        });
        
        // Solo intervenir si hay secciones COMPLETAMENTE ocultas
        if (hiddenCount > 0) {
          console.warn(`${hiddenCount} secciones completamente ocultas detectadas, corrigiendo...`);
          
          sections.forEach(section => {
            const computed = window.getComputedStyle(section);
            if (computed.opacity === '0' && computed.visibility === 'hidden') {
              // Corrección mínima
              section.style.opacity = '1';
              section.style.visibility = 'visible';
              
              if (section.classList.contains('section-hero')) {
                section.style.display = 'flex';
              } else {
                section.style.display = 'block';
              }
            }
          });
        }
        
        // Parar la vigilancia después de 10 segundos (reducido de 30)
        if (watchInterval._checks >= 5) {
          clearInterval(watchInterval);
        }
        watchInterval._checks = (watchInterval._checks || 0) + 1;
      }, 2000); // Mantener cada 2 segundos
    }

    // Permitir que los scripts originales se ejecuten NORMALMENTE
    window.addEventListener('preloaderComplete', function() {
      // Pausa MUY pequeña para no interferir con los scripts originales
      setTimeout(() => {
        console.log('Permitiendo ejecución normal de scripts adicionales...');
        
        // NO cargar scripts dinámicamente - dejar que se carguen normalmente
        // Solo asegurar visibilidad básica si es necesario
        setTimeout(() => {
          const sections = document.querySelectorAll('.section');
          sections.forEach(section => {
            const computed = window.getComputedStyle(section);
            // Solo corregir si está completamente invisible
            if (computed.opacity === '0' && computed.visibility === 'hidden') {
              section.style.opacity = '1';
              section.style.visibility = 'visible';
              if (section.classList.contains('section-hero')) {
                section.style.display = 'flex';
              } else {
                section.style.display = 'block';
              }
            }
          });
        }, 2000); // Después de 2 segundos
        
      }, 200); // Pausa mínima
    });
  </script>

  <!-- Scripts de gestión de contenido optimizados -->
  <script>
    // NUEVA: Gestión segura de scripts adicionales
    window.addEventListener('preloaderComplete', function(event) {
      console.log('Iniciando carga segura de funcionalidades adicionales');
      
      // Funciones de navegación mejoradas
      function setupSafeNavigation() {
        // Navegación suave entre secciones
        const navButtons = document.querySelectorAll('.nav-button, a[href^="#"]');
        
        navButtons.forEach(button => {
          button.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetSection = document.querySelector(targetId);
            
            if (targetSection) {
              // Asegurar que la sección target sea visible antes de navegar
              targetSection.style.cssText = `
                opacity: 1 !important;
                visibility: visible !important;
                display: block !important;
              `;
              
              targetSection.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
            }
          });
        });
      }

      // Configurar navegación móvil segura (SIMPLIFICADA)
      function setupMobileNavigation() {
        // El header original no tiene menú hamburguesa complejo
        // Solo asegurar que la navegación básica funcione
        console.log('Navegación móvil simplificada configurada');
      }

      // Fix para la primera sección en móviles
      function ensureHeroSectionVisible() {
        const heroSection = document.querySelector('.section-hero');
        if (heroSection) {
          heroSection.style.cssText = `
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            opacity: 1 !important;
            visibility: visible !important;
            min-height: 100vh !important;
          `;
          
          // Asegurar que los elementos hijos también sean visibles
          const heroChildren = heroSection.querySelectorAll('*');
          heroChildren.forEach(child => {
            if (window.getComputedStyle(child).opacity === '0') {
              child.style.opacity = '1';
              child.style.visibility = 'visible';
            }
          });
        }
      }

      // Ejecutar configuraciones de manera segura
      setTimeout(() => {
        setupSafeNavigation();
        setupMobileNavigation();
        ensureHeroSectionVisible();
        
        console.log('Funcionalidades adicionales configuradas');
      }, 200);
    });

    // Fix adicional para scroll seguro
    function safeScrollToTop() {
      // Asegurar que la primera sección sea visible antes de hacer scroll
      const firstSection = document.querySelector('.section-hero');
      if (firstSection) {
        firstSection.style.cssText = `
          display: flex !important;
          opacity: 1 !important;
          visibility: visible !important;
        `;
      }
      
      window.scrollTo({
        top: 0,
        left: 0,
        behavior: 'smooth'
      });
    }

    // Función de emergencia para mostrar contenido
    function emergencyShowContent() {
      console.log('Función de emergencia activada');
      
      const allSections = document.querySelectorAll('.section');
      const header = document.querySelector('.site-header');
      
      allSections.forEach(section => {
        section.style.cssText = `
          opacity: 1 !important;
          visibility: visible !important;
          display: ${section.classList.contains('section-hero') ? 'flex' : 'block'} !important;
          transform: none !important;
          position: relative !important;
        `;
      });
      
      if (header) {
        header.style.cssText = `
          opacity: 1 !important;
          visibility: visible !important;
          display: block !important;
        `;
      }
      
      // Scroll al inicio
      safeScrollToTop();
    }

    // Botón de emergencia para debugging (remover en producción)
    window.showContent = emergencyShowContent;
    window.safeScroll = safeScrollToTop;
  </script>

  <!-- Scripts originales (cargarán NORMALMENTE) -->
  <script src="./scripts/initialAnimation.js"></script>
  <script src="./scripts/introSection.js"></script>
  <script src="./scripts/contactSection.js"></script>
  <script src="./scripts/jobsSection.js"></script>
  <script src="./scripts/projectsSection.js"></script>

</body>
</html>